<%- include('partials/header') %>
<div class="container mt-5">
    <h1 class="text-center mb-4">User List</h1>
    <div class="table-responsive d-none d-lg-block"> <!-- Table visible on large screens -->
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Card ID</th>
                    <th>Student ID</th>
                    <th>Balance</th>
                    <th>Status</th>
                    <th>Student Name</th>
                    <th>Last Transaction</th>
                </tr>
            </thead>
            <tbody>
                <% users.forEach(function(user) { %>
                    <% const lastTransaction = user.last_transaction.toLocaleString('en-US', { 
                        weekday: 'short', 
                        year: 'numeric',
                        month: 'short', 
                        day: 'numeric', 
                        hour: '2-digit', 
                        minute: '2-digit', 
                        second: '2-digit', 
                        hour12: false 
                    }).replace(',', ''); %>
                    <tr>
                        <td><%= user.card_id %></td>
                        <td><%= user.student_id %></td>
                        <td>₹<%= user.balance %></td>
                        <td><%= user.status %></td>
                        <td><%= user.student_name %></td>
                        <td><%= lastTransaction %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>

    <div class="row d-lg-none"> <!-- Cards visible on small screens -->
        <% users.forEach(function(user) { %>
            <% const lastTransaction = user.last_transaction.toLocaleString('en-US', { 
                weekday: 'short', 
                year: 'numeric',
                month: 'short', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit', 
                hour12: false 
            }).replace(',', ''); %>
            <div class="col-12 mb-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Card ID: <%= user.card_id %></h5>
                        <p class="card-text"><strong>Student ID:</strong> <%= user.student_id %></p>
                        <p class="card-text"><strong>Balance:</strong> ₹<%= user.balance %></p>
                        <p class="card-text"><strong>Status:</strong> <%= user.status %></p>
                        <p class="card-text"><strong>Student Name:</strong> <%= user.student_name %></p>
                        <p class="card-text"><strong>Last Transaction:</strong> <%= lastTransaction %></p>
                    </div>
                </div>
            </div>
        <% }); %>
    </div>
</div>
<%- include('partials/footer') %>
